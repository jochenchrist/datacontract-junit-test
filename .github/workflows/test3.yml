on:
  push:
  workflow_dispatch:

permissions:
  contents: write
  actions: read
  checks: write
  
jobs:
  container-test-job:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Data Contract Tests
        uses: datacontract/datacontract-action@main
        with:
          location: https://datacontract.com/examples/orders-latest/datacontract.yaml
          server: all
          
      # - name: Echo
      #   if: ${{ always() }}
      #   run: cat TEST-datacontract.xml

      - name: Data Contract Test Results (dorny/test-reporter)
        uses: dorny/test-reporter@v1
        if: success() || failure()  
        with:
          name: Data Contract Test Results (dorny/test-reporter)
          path: ./TEST-datacontract.xml                  # Path to test results
          reporter: java-junit              # Format of test results
      
